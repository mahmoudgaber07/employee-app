import{r as s,o as O,a as c,c as m,b as t,w as $,v as A,F as J,d as S,e as w,_ as B,f,t as d}from"./index-BPatyEc2.js";import{a as i}from"./axiosInstance-C5qXibIM.js";const M={key:0,class:"error"},T={key:1},V={class:"flex my-5 px-2 justify-between"},I={class:"search flex gap-4"},N={class:"employees"},F={class:"table-auto w-full"},j=t("thead",null,[t("tr",{class:"bg-green-100"},[t("th",null,"ID"),t("th",null,"Name"),t("th",null,"Salary"),t("th",null,"Birth Date"),t("th",null,"Joining Date"),t("th",{colspan:"2"},"Actions")])],-1),L=["onClick"],U=["onClick"],H={__name:"EmployeeView",setup(q){const o=s([]),u=s(""),n=s(!1),h=s(!1),_=s(null),v=s("");O(()=>{p()});const p=()=>{i.get("Employees").then(e=>{Array.isArray(e.data)?o.value=e.data:o.value=[e.data]}).catch(e=>n.value=!0)},k=e=>{i.delete(`Employees/${e.id}`).then(a=>p()).catch(a=>n.value=!0)},D=e=>{const a=e.name,l=e.salary,r=e.birthDate,y=e.dateOfJoining;i.patch(`Employees/${e.id}`,{name:a,salary:l,birthDate:r,dateOfJoining:y}).then(b=>p()).catch(b=>n.value=!0)},E=e=>{const a=e.name,l=e.salary,r=e.birthDate,y=e.dateOfJoining;i.post("Employees",{name:a,salary:l,birthDate:r,dateOfJoining:y}).then(b=>p()).catch(b=>n.value=!0)},x=()=>{i.get(`Employees/${u.value}`).then(e=>{o.value=Array.isArray(e.data)?e.data:[e.data]}).catch(e=>n.value=!0),u.value=""},g=(e,a)=>{console.log(e,a),_.value=e,v.value=a,h.value=!0},C=()=>{h.value=!1};return(e,a)=>n.value?(c(),m("div",M," Error fetching employee details. ")):o.value?(c(),m("div",T,[t("div",V,[t("div",I,[$(t("input",{type:"number","onUpdate:modelValue":a[0]||(a[0]=l=>u.value=l),placeholder:"Search by ID ...",class:"border-2 border-green-400 rounded-md p-2"},null,512),[[A,u.value]]),t("button",{onClick:x,class:"bg-green-100 px-2 py-3 rounded-md"},"Search")]),t("button",{class:"bg-green-100 px-2 py-3 rounded-md",onClick:a[1]||(a[1]=l=>g(null,"add-employee"))},"Add Employee")]),t("div",N,[t("table",F,[j,t("tbody",null,[(c(!0),m(J,null,S(o.value,l=>(c(),m("tr",{key:l.id},[t("td",null,d(l.id),1),t("td",null,d(l.name),1),t("td",null,d(l.salary),1),t("td",null,d(l.birthDate),1),t("td",null,d(l.dateOfJoining),1),t("td",null,[t("button",{onClick:r=>g(l,"edit-employee"),class:"bg-green-100 px-2 py-1 rounded"}," Edit ",8,L)]),t("td",null,[t("button",{onClick:r=>k(l),class:"bg-red-100 px-2 py-1 rounded"}," Delete ",8,U)])]))),128))])]),h.value?(c(),w(B,{key:0,isOpen:h.value,onClose:C,onSubmit:v.value==="edit-employee"?D:E,employee:_.value,modalType:v.value},null,8,["isOpen","onSubmit","employee","modalType"])):f("",!0)])])):f("",!0)}};export{H as default};
