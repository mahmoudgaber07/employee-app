import{r as l,o as C,a as d,c as p,b as t,w as M,v as $,F as A,d as w,e as N,_ as S,f as b,t as h}from"./index-BPatyEc2.js";import{a as c}from"./axiosInstance-C5qXibIM.js";const B={key:0,class:"error"},T={key:1},V={class:"flex my-5 px-2 justify-between"},E={class:"search flex gap-4"},I={class:"departments"},O={class:"table-auto w-full"},F=t("thead",null,[t("tr",{class:"bg-green-100"},[t("th",null,"ID"),t("th",null,"Department Manager"),t("th",null,"Department Name"),t("th",{colspan:"2"},"Actions")])],-1),j=["onClick"],L=["onClick"],G={__name:"DepartmentView",setup(U){const r=l([]),u=l(""),s=l(!1),i=l(!1),_=l(null),v=l("");C(()=>{m()});const m=()=>{c.get("Departments").then(e=>{Array.isArray(e.data)?r.value=e.data:r.value=[e.data]}).catch(e=>s.value=!0)},y=e=>{c.delete(`Departments/${e.id}`).then(a=>m()).catch(a=>s.value=!0)},f=e=>{const a=e.departmentName,n=e.departmentManager;c.patch(`Departments/${e.id}`,{name:a,manager:n}).then(o=>m()).catch(o=>s.value=!0)},D=e=>{const a=e.departmentName,n=e.departmentManager;c.post("Departments",{name:a,manager:n}).then(o=>m()).catch(o=>s.value=!0)},k=()=>{c.get(`Departments/${u.value}`).then(e=>{r.value=Array.isArray(e.data)?e.data:[e.data]}).catch(e=>s.value=!0),u.value=""},g=(e,a)=>{console.log(e,a),_.value=e,v.value=a,i.value=!0},x=()=>{i.value=!1};return(e,a)=>s.value?(d(),p("div",B," Error fetching department details. ")):r.value?(d(),p("div",T,[t("div",V,[t("div",E,[M(t("input",{type:"number","onUpdate:modelValue":a[0]||(a[0]=n=>u.value=n),placeholder:"Search by ID...",class:"border-2 border-green-400 rounded-md p-2"},null,512),[[$,u.value]]),t("button",{onClick:k,class:"bg-green-100 px-2 py-3 rounded-md"},"Search")]),t("button",{class:"bg-green-100 px-2 py-3 rounded-md",onClick:a[1]||(a[1]=n=>g(null,"add-department"))},"Add Department")]),t("div",I,[t("table",O,[F,t("tbody",null,[(d(!0),p(A,null,w(r.value,n=>(d(),p("tr",{key:n.id},[t("td",null,h(n.id),1),t("td",null,h(n.manager),1),t("td",null,h(n.name),1),t("td",null,[t("button",{onClick:o=>g(n,"edit-department"),class:"bg-green-100 px-2 py-1 rounded"}," Edit ",8,j)]),t("td",null,[t("button",{onClick:o=>y(n),class:"bg-red-100 px-2 py-1 rounded"}," Delete ",8,L)])]))),128))])]),i.value?(d(),N(S,{key:0,isOpen:i.value,onClose:x,onSubmit:v.value==="add-department"?D:f,department:_.value,modalType:v.value},null,8,["isOpen","onSubmit","department","modalType"])):b("",!0)])])):b("",!0)}};export{G as default};
